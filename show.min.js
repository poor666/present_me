assetsURL="http://dl.dropbox.com/u/1205299/present.me/";InflectionJS={id_suffix:new RegExp("(_ids|_id)$","g"),underbar:new RegExp("_","g")};if(!String.prototype.humanize){String.prototype.humanize=function(B){var A=this.toLowerCase();A=A.replace(InflectionJS.id_suffix,"");A=A.replace(InflectionJS.underbar," ");if(!B){A=A.capitalize();}return A;};}if(!String.prototype.capitalize){String.prototype.capitalize=function(){var A=this.toLowerCase();A=A.substring(0,1).toUpperCase()+A.substring(1);return A;};}function addScript(A){var B=document.createElement("script");B.type="text/javascript";B.src=A;$("head").append(B);}function addCss(A){var B=document.createElement("link");B.type="text/css";B.href=A;B.rel="stylesheet";$("head").append(B);}addCss(assetsURL+"css/show_style.css");function rotatePresentation(A){var B=result.pages[A[count].page];eimg=$(".page img");eimg[0].src="export/"+B.name+"/"+B.states[A[count].state].state;ahref=$(".page a");ahref.attr("href",B.name.humanize()+"/"+B.states[A[count].state].state.humanize().slice(0,-4));ahref.attr("rel","address:"+B.name.humanize()+"/"+B.states[A[count].state].state.humanize().slice(0,-4));$(document).attr("title",B.name.humanize()+", "+B.states[A[count].state].state.humanize().slice(0,-4)+" - "+result.setup.title.humanize());$.address.value(B.name.humanize()+"/"+B.states[A[count].state].state.humanize().slice(0,-4));count++;}$(document).ajaxError(function(C,B,A){alert("falta os ficheiros");});function checkifLoad(){count=findPage(fileInit).i;rotatePresentation(show);}$(document).ready(function(){startPage();$.address.externalChange(function(A){_url=A.value.split("/");fileInit={pasta:_url[1],file:_url[2]};setTimeout(checkifLoad,12);});$.address.change(function(A){_url=A.value.split("/");fileInit={pasta:_url[1],file:_url[2]};if(A.value!="/"){}else{}});$.address.init(function(A){_url=A.value.split("/");fileInit={pasta:_url[1],file:_url[2]};});});function startPage(){r=window.location.pathname.split("/index.html");$("body").css("background-image","url(export/fundo/fundo.jpg)");$.getJSON("export/data.json",function(D,C,B){result=D;if(result==null){}else{show=new Array();$.each(D.pages,function(F,G){$.each(D.pages[F].states,function(H,I){show.push({page:F,state:H,pageLabel:D.pages[F].name,stateLabel:D.pages[F].states[H].state});});});}if(!fileInit.pasta){count=0;}else{count=findPage(fileInit).i;}var A=result.pages[show[count].page];var E=$("<div class='page'>").appendTo("#main");E.append('<a href="#" rel="#"><img src="export/'+A.name+"/"+A.states[show[count].state].state+'"></a>');$(document).attr("title",A.name.humanize()+", "+A.states[show[count].state].state.humanize().slice(0,-4)+" - "+result.setup.title);$.address.value(A.name.humanize()+"/"+A.states[show[count].state].state.humanize().slice(0,-4));count++;$("a").click(function(){if(show.length==count){count=0;}rotatePresentation(show);});$("a").address(function(){return $(this).attr("href").replace(/^#/,"");});});}function findPage(A){var B=new Array();$.each(show,function(C,D){if(A.pasta.humanize()==D.pageLabel.humanize()){B.push(D);}});$.each(B,function(C,D){if(A.file.humanize()==D.stateLabel.humanize().slice(0,-4)){obFInal={page:D.page,state:D.state};}});$.each(show,function(C,D){if((D.page==obFInal.page)&&(D.state==obFInal.state)){obFInal.i=C;}});return obFInal;}